# Решение домашнего задания по OWASP Juice Shop

Это файл содержит теоретические ответы и описание шагов для выполнения заданий из `README.md` по OWASP Juice Shop.

## Общая информация для запуска

Для выполнения практической части заданий необходимо запустить OWASP Juice Shop с помощью Docker:

```yaml
version: '3.7'
services:
  shop:
    image: bkimminich/juice-shop
    ports:
      - "3000:3000"
```

После запуска приложение будет доступно по адресу `localhost:3000`.

## Задание 1: SQLi (SQL-инъекция)

### 1. Использованные для ввода данные

*   **В поле Email (или Username):**
    *   ' OR '1'='1' --
*   **В поле Password:**
    *   Можно оставить пустым или ввести любую строку, если инъекция в поле логина достаточно сильная, чтобы обойти проверку пароля.


### 2. Под каким пользователем вам удалось войти (предположение)

`admin@juice-sh.op`

### 3. Ваши предположения, почему удалось войти именно под этим пользователем

Удалось войти под этим пользователем, потому что:
1.  **Уязвимость SQL-инъекции:** Приложение некорректно обрабатывает пользовательский ввод, позволяя внедрять SQL-код в запросы к базе данных.
2.  **Обход логики аутентификации:** Внедренный SQL-код (`' OR '1'='1`) изменяет логику запроса таким образом, что условие WHERE всегда становится истинным для одной или нескольких записей.
3.  **Выбор первой подходящей записи:** Если запрос возвращает несколько пользователей (что маловероятно при такой простой инъекции, но возможно при других типах), приложение, скорее всего, аутентифицирует сессию для первого пользователя из набора результатов. В случае Juice Shop, администратор часто является таким пользователем по умолчанию или пользователем с ID=1.

### 4. Где хранится аутентификационная информация, что она из себя представляет и как передаётся в каждом запросе

Токен передан в Local Storage и Cookies, так же в Session Storage храниться bid пользователя.

## Задание 2: robots.txt

### Анализ и вывод о корректности использования `robots.txt`

**Корректность использования в контексте безопасности:**
`robots.txt` **не является механизмом безопасности**. Его основная цель — управление краулингом сайта поисковыми системами, а не предотвращение доступа к конфиденциальной информации.

**Анализ для OWASP Juice Shop:**

1.  **Доступ к файлу:** Файл `robots.txt` доступен по адресу `http://localhost:3000/robots.txt`.
2.  **Содержимое (предоставлено вами):**
    ```
    User-agent: *
    Disallow: /ftp
    ```

**Вывод о корректности и последствиях:**

*   **Некорректно, если используется как мера безопасности:** Если разработчики Juice Shop внесли в `robots.txt` путь `/ftp` с мыслью, что это его скроет от неавторизованного доступа, то это некорректное использование.
    *   **Последствия:** Злоумышленники первым делом просматривают `robots.txt`, чтобы найти интересные пути, которые разработчики пытались скрыть от поисковиков, но не от прямого доступа. Директива `Disallow: /ftp` является прямой наводкой для атакующего на то, что по адресу `http://localhost:3000/ftp` может находиться что-то интересное (например, файлы, которые не должны быть общедоступны, исходный код, резервные копии, или, в контексте CTF и Juice Shop, флаги или уязвимые компоненты).
*   **Корректно, если используется по назначению (маловероятно в данном случае):** Если бы директория `/ftp` действительно не предназначалась для индексации поисковыми системами и при этом была бы должным образом защищена от несанкционированного доступа другими методами (например, аутентификацией на уровне сервера), то само по себе наличие такой записи в `robots.txt` было бы нормальным.

## Задание 3: «Взлом администратора»

Установленный пароль:

admin123

**Меры, которые позволили бы защититься от атаки подбора пароля:**

1.  **Использование сложных и уникальных паролей:**
    *   Пароль должен быть длинным (минимум 12-16 символов).
    *   Содержать буквы в разном регистре, цифры и специальные символы.
    *   Быть уникальным для каждого сервиса.
    *   Регулярная смена паролей (хотя современные рекомендации смещаются в сторону очень сложных паролей, которые не требуют частой смены, если нет компрометации).
2.  **Многофакторная аутентификация (MFA/2FA):**
    *   Даже если пароль украден или подобран, злоумышленнику потребуется второй фактор (например, код из SMS, приложения-аутентификатора, аппаратный ключ). Это одна из самых эффективных мер.
3.  **Ограничение количества попыток входа (Rate Limiting):**
    *   После нескольких неудачных попыток входа с одного IP-адреса или для одной учетной записи, временно блокировать возможность входа (например, на 5-15 минут, с экспоненциальным увеличением времени блокировки).
4.  **Использование CAPTCHA:**
    *   Требовать от пользователя прохождение CAPTCHA после нескольких неудачных попыток входа, чтобы отсеять автоматизированные атаки (ботов).
5.  **Мониторинг и оповещения об аномальной активности:**
    *   Система должна логировать все попытки входа (успешные и неуспешные).
    *   Настроить оповещения для администраторов безопасности о большом количестве неудачных попыток входа, попытках входа с подозрительных IP-адресов и т.д.
6.  **Политики блокировки учетных записей:**
    *   Автоматическая временная или постоянная (до ручной разблокировки администратором) блокировка учетной записи после определенного числа последовательных неудачных попыток входа.
7.  **Проверка на утечки паролей:**
    *   Регулярно проверять используемые пароли (особенно административные) по базам данных известных утечек (например, Have I Been Pwned).
8.  **Обучение пользователей:**
    *   Информировать пользователей о важности использования надежных паролей и распознавания фишинговых атак.

Применение этих мер в комплексе значительно повышает устойчивость системы к атакам подбора пароля. 
